<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Locator sample with Woosmap Map JS API</title>
    <meta property="og:title" content="Store Locator sample with Woosmap Map JS API"/>
    <meta property="og:locale" content="en_US"/>
    <meta name="description"
          content="Build powerful personalized Store Locator with Woosmap Map JS API."/>
    <meta property="og:description"
          content="Build powerful personalized Store Locator with Woosmap Map JS API."/>
    <link rel="canonical" href="https://demo.woosmap.com/storelocator/mapjs/"/>
    <meta property="og:url" content="https://demo.woosmap.com/storelocator/mapjs/"/>
    <meta property="og:site_name" content="Woosmap Map JS API"/>
    <meta charset="UTF-8"/>
</head>
<body>
<script type="module" src="./index.ts"></script>
<div id="StoreLocator"></div>
<script>
    let storeLocator;

    function init(localeLang = "") {
        const container = document.querySelector("#StoreLocator");
        if (container) {
            storeLocator = new woosmapLocator({
                $target: container,
                initialState: {
                    locale: localeLang,
                    config: {
                        map: {
                            woosmapPublicKey: "woos-48c80350-88aa-333e-835a-07f4b658a9a4",
                            storesStyle: {
                                breakPoint: 11,
                                default: {
                                    color: "#008a2f",
                                    size: 8,
                                    minSize: 1,
                                    icon: {
                                        url: "https://images.woosmap.com/starbucks-marker.svg",
                                        scaledSize: {
                                            height: 40,
                                            width: 34,
                                        },
                                    },
                                    selectedIcon: {
                                        url: "https://images.woosmap.com/starbucks-marker-selected.svg",
                                        scaledSize: {
                                            height: 50,
                                            width: 43,
                                        },
                                    },
                                },
                            }
                        }
                    }
                }
            });
        }
    }

    function changeLocale(localeLang = "") {
        storeLocator.setState({
            locale: localeLang,
        }, false);
    }

    window.addEventListener("DOMContentLoaded", () => {
        init();
    });
</script>
<div class="language-picker" style="position:absolute; z-index: 1;right: 50px;top: 10px;">
    <div class="language-picker__form">
        <select name="language-picker-select" id="language-picker-select">
            <option lang="en" value="EN" selected>English</option>
            <option lang="fr" value="FR">Fran√ßais</option>
        </select>
    </div>
    <script>
        const langSelect = document.querySelector(`[id="language-picker-select"]`);
        langSelect.addEventListener(`change`, (e) => {
            const select = e.target;
            const localeLang = select.value;
            document.documentElement.setAttribute("lang", localeLang);
            changeLocale(localeLang)
        });
    </script>
</div>
</body>
</html>
